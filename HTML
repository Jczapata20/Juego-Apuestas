      
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Puntuaciones</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Juego de Puntuaciones</h1>
        <div id="input-section">
            <label for="numPlayers">Ingrese la cantidad de jugadores:</label>
            <input type="number" id="numPlayers" min="1" max="100" required>
            <button onclick="startGame()">Iniciar Juego</button>
        </div>
        <div id="game-section" style="display: none;">
            <h2>Rondas</h2>
            <div id="round-info"></div>
            <div id="players-section"></div>

            <!-- Aquí agregamos el contenedor de la tabla de puntuaciones -->
            <div id="scores-table"></div>

            <button onclick="nextRound()">Siguiente Ronda</button>
            <!-- Botón para corregir (borrar) las puntuaciones de la ronda actual -->
            <button onclick="clearCurrentScores()">Corregir</button>
        </div>
        <div id="result-section" style="display: none;">
            <h2>Resultados Finales</h2>
            <div id="final-results"></div>
            <button onclick="restartGame()">Reiniciar Juego</button>
            <button onclick="correctData()">Corregir Datos</button>
        </div>
    </div>

    <script>
        let numPlayers, players = [], currentRound = 1, totalRounds = 12, playerScores = [], roundNames = [];
        let isDescending = false;

        function startGame() {
            numPlayers = document.getElementById('numPlayers').value;

            if (numPlayers < 1) {
                alert("Por favor ingresa una cantidad válida de jugadores.");
                return;
            }

            // Pedir nombres de los jugadores
            players = [];
            for (let i = 0; i < numPlayers; i++) {
                const name = prompt(`Ingresa el nombre del jugador ${i + 1}:`);
                players.push(name);
                playerScores.push(0);
            }

            document.getElementById('input-section').style.display = 'none';
            document.getElementById('game-section').style.display = 'block';
            
            // Crear el patrón de rondas
            roundNames = [];
            for (let i = 1; i <= 6; i++) roundNames.push(`Ronda ${i}`);
            roundNames.push("Ronda 6 (Sin espada)");
            for (let i = 5; i >= 1; i--) roundNames.push(`Ronda ${i}`);

            showRoundInfo();
        }

        function showRoundInfo() {
            document.getElementById('round-info').innerHTML = `<h3>${roundNames[currentRound - 1]}</h3>`;
            document.getElementById('players-section').innerHTML = players.map((player, index) => `
                <div>
                    <label for="score-${index}">${player}: </label>
                    <input type="text" id="score-${index}" placeholder="Puntuación" />
                </div>
            `).join('');
        }

        function nextRound() {
            // Verificar si todos los campos de puntuación están llenos
            for (let i = 0; i < numPlayers; i++) {
                const score = document.getElementById(`score-${i}`).value.trim(); // Eliminamos espacios innecesarios
                
                // Si el campo está vacío, mostrar alerta
                if (score === '') {
                    alert(`Por favor, ingresa una puntuación válida para ${players[i]}.`);
                    return;
                }

                // Validación para asegurarse de que el valor ingresado sea numérico, incluyendo negativos
                if (isNaN(score)) {  // Verifica si no es un número
                    alert(`La puntuación para ${players[i]} debe ser un número válido (incluyendo números negativos).`);
                    return;
                }

                // Guardamos el valor de puntuación como un número
                playerScores[i] = parseFloat(score);  // Convertimos a número (puede ser negativo)
            }

            // Mostrar la tabla de puntuaciones después de cada ronda
            updateScoresTable();

            // Pasar a la siguiente ronda
            if (currentRound < totalRounds) {
                currentRound++; // Aumenta la ronda actual
                showRoundInfo();
            } else {
                showResults();
            }
        }

        function updateScoresTable() {
            let tableHTML = `
                <table border="1">
                    <thead>
                        <tr>
                            <th>Jugador</th>
                            <th>Puntuación</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            for (let i = 0; i < numPlayers; i++) {
                tableHTML += `
                    <tr>
                        <td>${players[i]}</td>
                        <td>${playerScores[i]}</td>
                    </tr>
                `;
            }

            tableHTML += `
                    </tbody>
                </table>
            `;

            document.getElementById('scores-table').innerHTML = tableHTML;
        }

        function showResults() {
            document.getElementById('game-section').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';

            let maxScore = Math.max(...playerScores);
            let winner = players[playerScores.indexOf(maxScore)];

            let results = players.map((player, index) => {
                return `<p>${player}: ${playerScores[index]} puntos</p>`;
            }).join('');

            document.getElementById('final-results').innerHTML = `
                <h3>Jugador con más puntos: ${winner} (${maxScore} puntos)</h3>
                ${results}
            `;
        }

        // Función para corregir (borrar) los puntajes de la ronda actual
        function clearCurrentScores() {
            // Limpiar las puntuaciones de esta ronda (sin afectar el puntaje acumulado)
            for (let i = 0; i < numPlayers; i++) {
                document.getElementById(`score-${i}`).value = ''; // Borrar el campo de la entrada de puntuación
            }
        }
    </script>
</body>
</html>
